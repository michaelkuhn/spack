#!/bin/sh
#
# Copyright 2013-2019 Lawrence Livermore National Security, LLC and other
# Spack Project Developers. See the top-level COPYRIGHT file for details.
#
# SPDX-License-Identifier: (Apache-2.0 OR MIT)

SELF_PATH="$0"

if command -v readlink >/dev/null 2>&1
then
	SELF_PATH="$(readlink --canonicalize-existing -- "$0")"
fi

SELF_DIR="${SELF_PATH%/*}"

get_python_command ()
{
	local cmd='python'

	for c in python3 python2
	do
		if command -v "${c}" >/dev/null 2>&1
		then
			cmd="${c}"
			break
		fi
	done

	printf '%s' "${cmd}"
}

get_spack_command ()
{
	local cmd='spack-real'

	if test -n "${SELF_DIR}"
	then
		cmd="${SELF_DIR}/${cmd}"
	fi

	printf '%s' "${cmd}"
}

/usr/bin/env "$(get_python_command)" "$(get_spack_command)" "$@"
